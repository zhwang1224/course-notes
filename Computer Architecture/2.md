## 3.1 指令级并行
1. 由于指令可以并行执行，所以指令之间的可能的重叠执行称为指令级并行 ILP
ILP大体有两种实现方法：
   1. 依靠硬件来动态发现并实现并行
   2. 依靠软件技术在编译时发现并行

2. 流水线CPI每条指令占用的周期数 = 理想流水线CPI+结构化停顿+数据冒险停顿+控制停顿
   1. 理想流水线CPI是最佳性能

3. 提高ILP最简单的方法就是在一个循环的歌词迭代之间利用并行，循环级并行
4. 数据依赖和冒险
   1. 数据依赖 真数据依赖 如果是数据依赖必须顺序执行，不能同时也不能完全重叠，这种依赖意味着两条指令存在一个或多个数据冒险构成的链
   2. 名称依赖和控制依赖  使用相同的寄存器或地址；分支控制
   3. 数据冒险：
      1. RAW 写后读
      2. WAW 写后写
      3. WAR 读后写
      4. RAR 读后读不是冒险

## 3.2 ILP的基本编译器技术
1. 基本流水线调度和循环展开
   1. 循环的简单流水线不执行调度执行的情况有很多停顿和空闲时钟周期，可以进行调度缩短一个循环执行的周期，但依旧利用率不高，增加指令数量的一个有效方法是循环展开 Loop unrolling, 就是将循环复制多次，同时调整循环的终止代码。
   2. 对展开循环调度所获得的收益比源循环进行调度要大，但大量展开和调度会导致寄存器紧缺。
2. 相关分支预测器
   1. 利用其他分支行为来进行预测的分支预测器为相关预测器
   2. 竞争预测器：全局局部预测器
   3. 利用先进的分支预测降低分支开销

## 用动态调度来克服数据冒险
1. 动态调度
   1. 硬件重新安排指令执行顺序，减少停顿同时保持数据令
   2. 允许针对一种流水线的代码在不同流水线上高效执行，不需要重新进行编译
   3. 可以应对依赖关系未知的情况
   4. 可以允许处理器容忍一些意料之外的延迟
2. 动态调度思想
   1. 使指令在数据准备好后立刻执行，意味着乱序执行、乱序完成，这会带来WAR WAW的危险。动态调度就会带来不精确中断，使异常的现场恢复很麻烦。为了实现乱序执行，ID阶段被拆成两个部分——Issue（译码，检查数据危险）Read Operands（等到没有数据危险读数）
   2. 我们区分指令何时开始执行和何时完成执行;在这之间，指令正在执行。流水线允许多个指令同时执行，需要多个功能单元，所有指令依次通过发布阶段(有序发布);然而，它们可能在第二阶段(读取操作数)停滞或相互绕过，从而进入无序执行。
   3. 记分牌SCORE boarding：资源充足、不存在数据依赖时乱序执行指令
   4. Tomasulo算法：算法同规格动态重命名来处理反依赖和输出依赖，此外还可以进行扩展处理预测
