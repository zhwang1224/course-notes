## 4.3 不确定动作的搜索
之前对环境的假设-完全可观察、确定的
1. Agent 总知道自己处于什么状态
2. Agent 准确知道某个行动序列后达到什么状态
3. 行动开始后，无需提供新的信息

### 4.3.1 不稳定的吸尘器世界
3. 不确定动作的形式化
   1. 推广转移模型 Result函数
   2. 推广解的概念
   3. 一棵树而非路径 与或树

### 4.3.2 与或搜索树
1. 或节点 可选择的选项
   1. 在确定环境下，分支是由agent在每个状态下的选择形成的
2. 与节点 选择选项的可能结果
   1. 再不确定环境下，分支形成的可能是由于环境选择每个行动的后果
3. 解的形态
   1. 一颗子树
   2. 每个叶子都有目标
   3. 或节点规范一个活动
   4. 与节点包含所有可能
4. 搜索与执行交错
5. loop的 处理
   1. 当前状态与某条路径上的状态相同
   2. 遇到loop则返回失败

### 4.3.3 不断尝试
移动动作可能失败需要循环，不断尝试

## 4.4 部分可观察信息的搜索
1. 部分可观察
   1. agent未来行动依赖于感知信息（可能为0）
   2. 感知不足以精确描述状态
2. 信念状态 belief state
   1. 在给定行动序列和感知信息的情况下表达agent对它当前所在的物理世界的信念。
3. 信念状态空间！= 实际状态空间
4. 状态空间变了，搜索基本框架不变

### 4.4.1 无观察信息的搜索
1. 无传感问题   
   1. 信念状态空间中的问题是完全可观察的
2. 无传感信息的形式化
   1. 信念状态：整个信念状态空间包含的物理状态的每个可能集合{1，2，3，4，5}
   2. 初始状态：问题p中的所有状态的集合
   3. 行动：假设非法行动对环境没有影响，所有物理状态的动作的并集
   4. 转移模型：在信念状态下的某一物理状态采用某个行动可能导致另一状态
      1. 确定性动作和不确定性动作，不确定的动作会导致信念状态变大
      2. **预测-行动后生成新的信念状态的过程**
   5. 目标测试：信念状态满足目标当且仅当所有物理状态都满足目标测试
   6. 路径开销可能会有多个值
3. 无传感信息搜索的解
   1. 增量式求解

### 4.4.2 有观察信息的搜索
1. PERCEPT(s)函数
   1. 完全可观察PERCEPT(s)=s
   2. 无感知PERCEPT(s)=null
   3. 部分可观察PERCEPT(s)=[A, dirty]
2. 完成某个动作的三个阶段 RESULT(b,a)
   1. 预测阶段
   2. 观察预测阶段
   3. 更新阶段

### 4.4.3 求解部分可观察环境中的问题
   1. 使用与或搜索树，解是一个条件规划
   2. [suck, right, if state=6 then suck else []]

### 4.4.4 部分可观察环境中的Agent
   1. NSW NS 障碍物

## 4.5 联机搜索和未知环境
   1. 脱机搜索：先对实际行动计算完整解决方案之后在行动 计算 执行-感知两阶段
   2. 联机搜索：交替计算和行动来完成任务 计算-执行-感知三个阶段

### 4.5.1 联机搜索
   1. 环境假设：确定的、完全可观察的
   2. Agent已知信息：
      1. Actions(s) 状态s下可能进行的行动列表
      2. 单步耗散函数c（s,a,s'）
      3. Goal-test(s)
   3. 注意这里没有result(s,a)函数（转移模型）
   4. 竞争比：实际开销/最短路径   Agent实际开销（联机）/脱机最短路径开销（脱机）
   5. 死胡同：无法到达目标的状态；活动不可逆
   
### 4.5.2 联机搜索Agent
1. 联机搜索agent每次行动之后都能接收到感知信息
   1. 已到达状态
   2. 根据信息扩展地图
2. 无法引入随机重启，可以随机行走
3. 存储访问状态

1. 不确定性的环境，动作的不确定性。简单的路径搜索问题环境是完全可观察的，动作是确定性的，Agent了解每个动作的结果。
   1. 如果环境不确定性，环境部分可观察，Agent依赖于未来感知信息，所以问题的解不是一个序列而是一个条件规划 策略。第一步预测，第二部感知，组合之后成为与或树。与或搜索问题的解是一颗子树。
2. 完全不可观察（无传感器）
   1. 信念状态。转而搜索信念状态空间；初始信念状态：P中所有状态的集合。
3. 部分可观察的环境
   1. 初始信念状态：通过感知确定初始信念状态
   2. 预测观察更新